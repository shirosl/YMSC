<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Journey Home Countdown</title>
    <!-- Favicon - Website Logo -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ù§Ô∏è</text></svg>">
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            /* Radial gradient background for a "sketch of color fading" effect - NEW Lighter Blues */
            background: radial-gradient(circle at center, #63b3ed 0%, #3182ce 50%, #2a4365 100%); /* Adjusted for lighter feel */
            display: flex;
            flex-direction: column; /* Changed to column to stack elements */
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow-y: auto; /* Allow scrolling if content exceeds viewport height */
            overflow-x: hidden; /* Prevent horizontal scrollbars */
            position: relative; /* Needed for absolute positioning of animation */
            padding: 2rem 0; /* Add some vertical padding for content */
        }

        .countdown-container, .baggage-container { /* Applied common styles */
            background-color: rgba(255, 255, 255, 0.05); /* Slightly transparent background */
            border-radius: 20px;
            padding: 2.5rem; /* Increased padding */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            text-align: center;
            color: #e2e8f0; /* Light text color */
            backdrop-filter: blur(5px); /* Frosted glass effect */
            max-width: 90%; /* Responsive width */
            z-index: 10; /* Ensure container is above background */
            position: relative; /* For z-index to work */
            margin-bottom: 2rem; /* Space between containers */
        }

        .countdown-container {
            opacity: 0; /* Hidden initially for main fadeIn */
            animation: fadeIn 1s ease-out forwards; /* Main container fadeIn */
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .countdown-title, .baggage-title {
            font-size: 2.5rem; /* Larger title */
            font-weight: 700;
            margin-bottom: 2rem; /* More space */
            color: #ffffff; /* Brighter white for the title */
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.8), 0 0 25px rgba(99, 179, 237, 0.7); /* Enhanced shadow */
            opacity: 0; /* Hidden initially for staggered fadeIn */
            animation: fadeIn 1s ease-out forwards 0.5s; /* Staggered fadeIn */
        }

        .countdown-item {
            display: inline-block;
            margin: 0 1.5rem; /* Increased margin between items */
            position: relative;
            opacity: 0; /* Hidden initially for staggered fadeIn */
            animation: fadeIn 1s ease-out forwards 1s; /* Staggered fadeIn */
        }

        .countdown-item span {
            display: block;
            font-size: 5rem; /* Very large numbers */
            font-weight: 700;
            color: #a7f3d0; /* A vibrant green for numbers */
            text-shadow: 0 0 15px rgba(167, 243, 208, 0.8);
            min-width: 120px; /* Ensure numbers align */
            text-align: center;
            line-height: 1; /* Adjust line height */
            animation: pulseGlow 2s infinite alternate; /* Pulse glow for numbers */
        }

        .countdown-item div {
            font-size: 1.25rem; /* Larger labels */
            color: #cbd5e0; /* Slightly darker grey for labels */
            margin-top: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .message {
            font-size: 1.8rem; /* Larger message */
            color: #f6ad55; /* Orange for the message */
            margin-top: 3rem; /* More space */
            font-weight: 600;
            opacity: 0; /* Hidden by default */
            transition: opacity 1s ease-out;
            text-shadow: 0 0 10px rgba(246, 173, 85, 0.7);
            animation: fadeIn 1s ease-out forwards 1.5s; /* Staggered fadeIn */
        }

        .message.show {
            opacity: 1;
        }

        /* Baggage List specific styles */
        .baggage-list {
            list-style: none; /* Remove default bullet points */
            padding: 0;
            text-align: left; /* Align list items to the left */
            margin: 0 auto; /* Center the list within its container */
            max-width: 400px; /* Limit list width for better readability */
        }

        .baggage-list li {
            font-size: 1.1rem;
            margin-bottom: 0.75rem;
            color: #e2e8f0;
            position: relative;
            padding-left: 1.8rem; /* Space for custom checkmark */
            cursor: pointer; /* Indicate clickable */
            transition: color 0.3s ease, text-decoration 0.3s ease;
        }

        /* Default icon for list items */
        .baggage-list li::before {
            content: '‚ú®'; /* Generic sparkle emoji for other items */
            position: absolute;
            left: 0;
            color: #a7f3d0; /* Match green from numbers */
            font-size: 1.3rem;
            line-height: 1;
        }

        /* Specific icons based on data-item attribute */
        .baggage-list li[data-item="passport"]::before { content: 'üõÇ'; }
        .baggage-list li[data-item="tickets"]::before { content: '‚úàÔ∏è'; }
        .baggage-list li[data-item="wallet"]::before { content: 'üí∞'; }
        .baggage-list li[data-item="phone-charger"]::before { content: 'üì±'; }
        .baggage-list li[data-item="coffee-beans"]::before { content: '‚òï'; }
        .baggage-list li[data-item="bible"]::before { content: 'üìñ'; }
        .baggage-list li[data-item="clothes"]::before { content: 'üëï'; }
        .baggage-list li[data-item="undergarments"]::before { content: 'ü©≤'; } /* Briefs emoji */
        .baggage-list li[data-item="sleepwear"]::before { content: ' üëï'; } /* Generic for sleepwear */
        .baggage-list li[data-item="toiletries"]::before { content: 'üß¥'; } /* Lotion bottle for toiletries */
        .baggage-list li[data-item="medications"]::before { content: 'üíä'; }
        .baggage-list li[data-item="towel"]::before { content: 'üßñ‚Äç‚ôÄÔ∏è'; } /* Person in steamy room, implies towel */
        .baggage-list li[data-item="shoes"]::before { content: 'üëü'; }
        .baggage-list li[data-item="jacket"]::before { content: 'üß•'; }
        .baggage-list li[data-item="umbrella"]::before { content: '‚òî'; }
        .baggage-list li[data-item="adapter"]::before { content: 'üîå'; } /* Plug emoji */
        .baggage-list li[data-item="day-bag"]::before { content: 'üéí'; }
        .baggage-list li[data-item="entertainment"]::before { content: 'üìö'; }
        .baggage-list li[data-item="water-bottle"]::before { content: 'üíß'; }


        /* Style for packed items */
        .baggage-list li.packed {
            text-decoration: line-through;
            color: #a0aec0; /* Lighter gray for packed items */
            opacity: 0.7;
        }

        /* Animations */
        @keyframes pulseGlow {
            from { text-shadow: 0 0 15px rgba(167, 243, 208, 0.8); }
            to { text-shadow: 0 0 25px rgba(167, 243, 208, 1); }
        }

        /* Reunion Animation Styles */
        .reunion-particle {
            position: absolute;
            width: 30px;
            height: 30px;
            background-color: #f6ad55; /* Orange to match message */
            border-radius: 50%;
            opacity: 0;
            box-shadow: 0 0 20px #f6ad55;
            z-index: 5; /* Below countdown container */
        }

        .reunion-particle-1 {
            left: -50px; /* Start off screen left */
            top: 50%;
            transform: translateY(-50%);
            animation: moveParticle1 2s forwards ease-out 0.5s; /* Delay start */
        }

        .reunion-particle-2 {
            right: -50px; /* Start off screen right */
            top: 50%;
            transform: translateY(-50%);
            animation: moveParticle2 2s forwards ease-out 0.5s; /* Delay start */
        }

        @keyframes moveParticle1 {
            0% { left: -50px; opacity: 0; }
            50% { left: calc(50% - 20px); opacity: 1; }
            100% { left: calc(50% - 20px); opacity: 1; } /* Hold at center */
        }

        @keyframes moveParticle2 {
            0% { right: -50px; opacity: 0; }
            50% { right: calc(50% - 20px); opacity: 1; }
            100% { right: calc(50% - 20px); opacity: 1; } /* Hold at center */
        }

        .reunion-glow {
            animation: glowPulse 2s infinite alternate; /* Pulse when met */
        }

        @keyframes glowPulse {
            0% { transform: scale(1); box-shadow: 0 0 20px #f6ad55; }
            100% { transform: scale(1.2); box-shadow: 0 0 40px #f6ad55, 0 0 60px rgba(246, 173, 85, 0.5); }
        }

        /* Confetti Styles */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: transparent; /* Color set dynamically */
            border-radius: 50%;
            opacity: 0;
            animation: confetti-fall 3s ease-out forwards;
            pointer-events: none; /* Allow clicks through confetti */
            z-index: 9999;
        }

        @keyframes confetti-fall {
            0% { transform: translate(var(--x), var(--y)) rotate(0deg); opacity: 1; }
            100% { transform: translate(var(--x-end), var(--y-end)) rotate(720deg); opacity: 0; }
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .countdown-container, .baggage-container {
                padding: 1.5rem;
                margin-bottom: 1.5rem;
            }
            .countdown-title, .baggage-title {
                font-size: 1.8rem;
                margin-bottom: 1.5rem;
            }
            .countdown-item {
                margin: 0 0.8rem;
            }
            .countdown-item span {
                font-size: 3.5rem;
                min-width: 80px;
            }
            .countdown-item div {
                font-size: 1rem;
            }
            .message {
                font-size: 1.4rem;
                margin-top: 2rem;
            }
            .reunion-particle {
                width: 20px;
                height: 20px;
            }
            .baggage-list li {
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            .countdown-item {
                margin: 0 0.5rem;
            }
            .countdown-item span {
                font-size: 2.5rem;
                min-width: 60px;
            }
            .countdown-item div {
                font-size: 0.8rem;
            }
            .baggage-list li {
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="countdown-container">
        <h1 class="countdown-title">Journey Home: Arrival Countdown</h1>
        <div id="countdown" class="flex justify-center items-center">
            <div class="countdown-item">
                <span id="hours">00</span>
                <div>Hours</div>
            </div>
            <div class="countdown-item">
                <span id="minutes">00</span>
                <div>Minutes</div>
            </div>
            <div class="countdown-item">
                <span id="seconds">00</span>
                <div>Seconds</div>
            </div>
        </div>
        <p id="arrivalMessage" class="message">The wait is over! Welcome home, my dearest!</p>
    </div>

    <!-- 2-Day, 1-Night Baggage Checklist -->
    <div class="baggage-container">
        <h2 class="baggage-title">2-Day, 1-Night Baggage Checklist</h2>
        <ul id="baggageList" class="baggage-list">
            <li data-item="passport">Passport / ID / Visa (if needed)</li>
            <li data-item="tickets">Flight Tickets / Boarding Passes</li>
            <li data-item="wallet">Wallet / Local Currency / Credit Cards</li>
            <li data-item="phone-charger">Phone & Charger / Power Bank</li>
            <li data-item="coffee-beans">2 Coffee Beans Pack</li>
            <li data-item="bible">Bible</li>
            <li data-item="clothes">Change of Clothes (2 sets)</li>
            <li data-item="undergarments">Undergarments & Socks</li>
            <li data-item="sleepwear">Sleepwear</li>
            <li data-item="toiletries">Basic Toiletries (toothbrush, toothpaste, small shampoo/conditioner)</li>
            <li data-item="medications">Any necessary Medications</li>
            <li data-item="towel">Small Towel</li>
            <li data-item="shoes">Comfortable Walking Shoes</li>
            <li data-item="jacket">Light Jacket or Cardigan (for plane/cool evenings)</li>
            <li data-item="umbrella">Compact Umbrella (for Malaysia's weather)</li>
            <li data-item="adapter">Adapter (if different plug types)</li>
            <li data-item="day-bag">Small Backpack or Day Bag</li>
            <li data-item="entertainment">Book or Entertainment for Travel</li>
            <li data-item="water-bottle">Reusable Water Bottle</li>
        </ul>
    </div>

    <!-- Reunion Particles (initially hidden, appear on countdown end) -->
    <div id="reunionAnimation" class="hidden">
        <div class="reunion-particle reunion-particle-1"></div>
        <div class="reunion-particle reunion-particle-2"></div>
    </div>

    <script>
        // Get elements for displaying time
        const hoursEl = document.getElementById('hours');
        const minutesEl = document.getElementById('minutes');
        const secondsEl = document.getElementById('seconds');
        const arrivalMessageEl = document.getElementById('arrivalMessage');
        const reunionAnimationEl = document.getElementById('reunionAnimation');
        const reunionParticle1 = document.querySelector('.reunion-particle-1');
        const reunionParticle2 = document.querySelector('.reunion-particle-2');
        const baggageListEl = document.getElementById('baggageList');

        // Audio Context for sound effect
        let audioContext;
        let isSoundPlayed = false;

        function playCelebrationSound() {
            if (isSoundPlayed) return; // Play only once
            isSoundPlayed = true;

            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.type = 'sine'; // A clean tone
                oscillator.frequency.setValueAtTime(440, audioContext.currentTime); // A4 note
                gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.5, audioContext.currentTime + 0.05);
                gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 1.5);

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.start();
                oscillator.stop(audioContext.currentTime + 1.5);
            } catch (e) {
                console.error("Web Audio API not supported or error playing sound:", e);
            }
        }

        // Confetti function
        function createConfetti() {
            const colors = ['#f6ad55', '#a7f3d0', '#63b3ed', '#ffffff', '#cbd5e0'];
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.setProperty('--x', `${(Math.random() - 0.5) * 200}px`);
                confetti.style.setProperty('--y', `${(Math.random() - 0.5) * 200}px`);
                confetti.style.setProperty('--x-end', `${(Math.random() - 0.5) * 500}px`);
                confetti.style.setProperty('--y-end', `${window.innerHeight + 100}px`);
                confetti.style.animationDelay = `${Math.random() * 0.5}s`;
                document.body.appendChild(confetti);

                // Remove confetti after animation to clean up DOM
                confetti.addEventListener('animationend', () => {
                    confetti.remove();
                });
            }
        }

        // Packing List Logic
        function loadPackingList() {
            const packedItems = JSON.parse(localStorage.getItem('packedItems')) || {};
            baggageListEl.querySelectorAll('li').forEach(item => {
                const dataItem = item.dataset.item;
                if (packedItems[dataItem]) {
                    item.classList.add('packed');
                }
            });
        }

        function savePackingList() {
            const packedItems = {};
            baggageListEl.querySelectorAll('li').forEach(item => {
                const dataItem = item.dataset.item;
                packedItems[dataItem] = item.classList.contains('packed');
            });
            localStorage.setItem('packedItems', JSON.stringify(packedItems));
        }

        // Event listener for packing list
        baggageListEl.addEventListener('click', (event) => {
            if (event.target.tagName === 'LI') {
                event.target.classList.toggle('packed');
                savePackingList();
            }
        });

        // Function to update the countdown
        function updateCountdown() {
            const now = new Date();

            // Malaysia UTC offset (GMT+8)
            const malaysiaUTCOffset = 8;

            // Find next Sunday 5:45 AM MYT
            let targetMYT = new Date(now); // Start with current date for manipulation
            const day = targetMYT.getDay(); // Get current day (Sunday = 0, Monday = 1, etc.)
            const daysUntilSunday = (0 - day + 7) % 7; // Calculate days until next Sunday

            // Set date to next Sunday
            targetMYT.setDate(targetMYT.getDate() + daysUntilSunday);
            targetMYT.setHours(5, 45, 0, 0); // Set time to 5:45 AM

            // If target time is in the past, move to next week's Sunday
            if (targetMYT.getTime() < now.getTime()) {
                targetMYT.setDate(targetMYT.getDate() + 7);
            }

            // Calculate the difference between the target MYT and current local time
            // This accounts for the user's timezone automatically.
            const diff = targetMYT.getTime() - now.getTime();

            // Calculate time components
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            // Display the result in the elements
            if (hoursEl) hoursEl.textContent = String(hours).padStart(2, '0');
            if (minutesEl) minutesEl.textContent = String(minutes).padStart(2, '0');
            if (secondsEl) secondsEl.textContent = String(seconds).padStart(2, '0');

            // If the countdown is finished, display a message and trigger animation
            if (diff < 0) {
                clearInterval(countdownInterval); // Stop the timer
                if (document.getElementById('countdown')) document.getElementById('countdown').style.display = 'none';
                if (arrivalMessageEl) arrivalMessageEl.classList.add('show');

                // Trigger celebration effects only once
                if (!isSoundPlayed) {
                    playCelebrationSound();
                    createConfetti();
                }


                // Show and trigger reunion animation
                if (reunionAnimationEl) {
                    reunionAnimationEl.classList.remove('hidden');
                    // Add glow pulse after particles have met (2 seconds from animation start)
                    setTimeout(() => {
                        reunionParticle1.classList.add('reunion-glow');
                        reunionParticle2.classList.add('reunion-glow');
                    }, 2500); // A bit after the animation finishes
                }
            }
        }

        // Initial setup on load
        window.onload = function() {
            updateCountdown();
            loadPackingList(); // Load saved list state
            setInterval(updateCountdown, 1000); // Start the countdown
        }
    </script>
</body>
</html>
